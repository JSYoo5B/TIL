# 드디어, 추상화

## Sum의 Plus를 구현하자

이제 `Expression`이 추가적인 계산을 할 수 있게 변경하자. 먼저 테스트 코드부터 추가하자.

```go
func TestSumPlusMoney(t *testing.T) {
	var fiveBucks money.Expression = money.NewDollar(5)
	var tenFrancs money.Expression = money.NewFranc(10)
	bank := money.NewBank()
	bank.AddRate("CHF", "USD", 2)
	var sum money.Expression = money.NewSum(fiveBucks, tenFrancs).Plus(fiveBucks)
	var result money.Money = bank.Reduce(sum, "USD")
	assert.True(t, money.NewDollar(15).Equals(result))
}
```

이제는 어디까지가 `Expression`이고, 어디까지가 `Money`인지 정확히 구분해야 하므로, 굳이 type까지 정의하면서 테스트 코드를 작성했다.
15장에서는 `Sum.Plus()` 구현을 메서드 스텁만 추가했고, `nil`을 반환하므로 당연히 해당 테스트 코드는 에러가 발생한다. `Sum`을 재귀적으로 포함하게 구현해주자.

```go
func (s *Sum) Plus(addend Expression) Expression {
	return NewSum(s, addend)
}
```
